from typing import Any, Dict
from django.db.models.query import QuerySet
from django.views.generic.list import ListView
from django.views.generic.detail import DetailView
from articles.models import Article

class ArticleListView(ListView):
    context_object_name = 'articles'

    def get_queryset(self) -> QuerySet[Article]:
        self.order_by = self.request.GET.get('order')
        if not self.order_by:
            self.order_by = '-publication_date'
        return Article.objects.order_by(self.order_by)

    # The method is executed after `get_queryset()`
    def get_context_data(self, **kwargs: Any) -> Dict[str, Any]:
        context = super().get_context_data(**kwargs)
        # Pass the current ordering info to the template.
        context['current_order'] = self.order_by
        return context

class ArticleDetailView(DetailView):
    model = Article
    context_object_name = 'article'
